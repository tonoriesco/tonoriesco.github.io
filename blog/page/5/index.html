
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Tono's Blog">
      
      
      
        <link rel="canonical" href="https://tonoriesco.github.io/blog/page/5/">
      
      
        <link rel="prev" href="../../../gallery/">
      
      
        <link rel="next" href="../../category/ahorro/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Blog - Tono Riesco</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Tono Riesco" class="md-header__button md-logo" aria-label="Tono Riesco" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tono Riesco
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Tono Riesco" class="md-nav__button md-logo" aria-label="Tono Riesco" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Tono Riesco
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello, I'm Tono
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../gallery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Photography
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2014/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2014
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2013/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2013
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2012/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2012
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2011/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2011
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2010/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2010
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2009/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2009
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2008/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2008
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2007/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2007
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/ahorro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ahorro
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2014-01-13 00:00:00+00:00">January 13, 2014</time></li>
        
        
          
          <li class="md-meta__item">
            
              9 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/">Analog Sensors Reading with Raspberry Pi and Zabbix Supervisor</a></h2>
<p>This article is based in this <a href="http://www.raspberrypi-spy.co.uk/2013/10/analogue-sensors-on-the-raspberry-pi-using-an-mcp3008/">very good one</a></p>
<p>I added some comments, examples, circuits and Zabbix configuration.</p>
<blockquote>
<p><em>The main goal is having a common interface to read analog values and generate graphs, alarms, actions etc. with Zabbix.</em></p>
</blockquote>
<h2 id="analog-sensors-reading-with-raspberry-pi-as-interface"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#analog-sensors-reading-with-raspberry-pi-as-interface">Analog Sensors Reading with Raspberry Pi as Interface</a></h2>
<p>The Raspberry Pi has no built in analogue inputs which means it is a bit of a pain to use many of the available sensors. We need a A/D interface easy to configure in the RPi and the MCP3008 is the answer.</p>
<p>The MCP3008 is a 10bit 8-channel Analogue-to-digital converter (ADC). It is cheap, easy to connect and doesn‚Äôt require any additional components. It uses the SPI bus protocol which is supported by the Pi‚Äôs GPIO header.</p>
<p>This article explains how to use an MCP3008 device to provide 8 analogue inputs which you can use with a range of sensors. In the example circuit below I use a MCP3008 to read a light sensor and control/supervise the light inside Zabbix.</p>
<p><strong>The hardware:</strong></p>
<ul>
<li>Raspberry Pi</li>
<li>MCP3008 8 channel ADC</li>
<li>Light dependent resistor (LDR)</li>
<li>10 Kohm resistor</li>
<li>Breadboard</li>
<li>Some wiring</li>
</ul>
<h3 id="spi-bus"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#spi-bus">SPI Bus</a></h3>
<p>The MCP3008 read the analog value and give a 10 bits number that is transmitted by the SPI Bus. <img alt="SPI" src="/images/posts/spi.png" /></p>
<p>The Serial Peripheral Interface bus or SPI bus is a synchronous serial data link standard, that operates in full duplex mode.</p>
<p>Devices communicate in master/slave mode where the master device initiates the data frame. Multiple slave devices are allowed with individual slave select lines.</p>
<p>Sometimes SPI is called a four-wire serial bus, contrasting with three-, two-, and one-wire serial buses. SPI is often referred to as SSI (Synchronous Serial Interface).</p>
<p>To enable hardware SPI on the RPi we need to make a modification to one of the system files:</p>
<pre><code>sudo nano /etc/modprobe.d/raspi-blacklist.conf
</code></pre>
<p>Add a ‚Äò#‚Äô character in front of the line spi-bcm2708. Use CTRL-X, then Y, then Return to save the file and exit. Reboot using the following :</p>
<pre><code>sudo reboot
</code></pre>
<p>To check the change has worked run the following command :</p>
<pre><code>lsmod
</code></pre>
<p>You should see ‚Äúspi_bcm2708‚Ä≥ listed in the output.</p>
<h3 id="install-python-spi-wrapper"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#install-python-spi-wrapper">Install Python SPI Wrapper</a></h3>
<p>In this project we are going to use Python and In order to read data from the SPI bus in Python we can install a library called ‚Äòpy-spidev‚Äô. To install it we first need to install ‚Äòpython-dev‚Äô :</p>
<pre><code>sudo apt-get install python-dev
</code></pre>
<p>Then to finish we can download ‚Äòpy-spidev‚Äô and compile it ready for use :</p>
<pre><code>mkdir py-spidev
cd py-spidev
wget https://raw.github.com/doceme/py-spidev/master/setup.py
wget https://raw.github.com/doceme/py-spidev/master/spidev\_module.c
sudo python setup.py install
</code></pre>
<h3 id="circuit"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#circuit">Circuit</a></h3>
<p>The following list shows how the MCP3008 can be connected. It requires 4 GPIO pins on the Pi P1 Header.<img alt="mcp3008" src="/images/posts/mcp3008.png" /></p>
<table>
<thead>
<tr>
<th>MCP3008</th>
<th>RPi</th>
</tr>
</thead>
<tbody>
<tr>
<td>VDD</td>
<td>3.3V</td>
</tr>
<tr>
<td>VREF</td>
<td>3.3V</td>
</tr>
<tr>
<td>AGND</td>
<td>GROUND</td>
</tr>
<tr>
<td>CLK</td>
<td>GPIO11 (P1-23)</td>
</tr>
<tr>
<td>DOUT</td>
<td>GPIO9 (P1-21)</td>
</tr>
<tr>
<td>DIN</td>
<td>GPIO10 (P1-19)</td>
</tr>
<tr>
<td>CS</td>
<td>GPIO8 (P1-24)</td>
</tr>
<tr>
<td>DGND</td>
<td>GROUND</td>
</tr>
</tbody>
</table>
<p>The CH0-CH7 pins are the 8 analogue inputs.</p>
<p>Next we can see the schematic of the circuit:</p>
<p><img alt="ssm-light_schem.png" src="/images/posts/ssm-light_schem.png" /></p>
<p>Here is the breadboard circuit :</p>
<p><img alt="SSM-Light_bb" src="/images/posts/ssm-light_bb.png" /></p>
<p>It uses CH0 for the light sensor. The other 7 inputs are spare.</p>
<p>Here is a photo of my test circuit on a small piece of breadboard:</p>
<p><img alt="SSM-Light_photo" src="/images/posts/rasberrypi-light.jpg" /></p>
<h3 id="light-dependent-resistor"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#light-dependent-resistor">Light Dependent Resistor</a></h3>
<p>I chose a <strong>LDR EG &amp; G Vactec, VT43, CdS, 8 Œ© to 300 KŒ©</strong>. Under normal lighting its resistance is approximately 10Kohm while in the dark this increases to over 2Mohm.<img alt="ldr_example" src="/images/posts/ldr.png" /></p>
<p>When there is lots of light the LDR has a low resistance resulting in the output voltage dropping towards 0V.</p>
<p>When it is dark the LDR resistance increases resulting in the output voltage increasing towards 3.3V. In this project has been used a LDR but whatever device changing his resistance depending of some phenomenon can be used and wired in the IC to be controlled.</p>
<h4 id="reading-the-data"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#reading-the-data">Reading The Data</a></h4>
<p>The ADC is 10bit so it can report a range of numbers from 0 to 1023 (2 to the power of 10). A reading of 0 means the input is 0V and a reading of 1023 means the input is 3.3V. Our 0-3.3V range would equate to a 0-10000 Lux range.</p>
<p>To read the data I used this Python script get_light.py:</p>
<pre><code class="language-python">#!/usr/bin/python

#!/usr/bin/python

import spidev
import time
import os

# Open SPI bus
spi = spidev.SpiDev()
spi.open(0,0)

# Function to read SPI data from MCP3008 chip
# Channel must be an integer 0-7

def ReadChannel(channel):
adc = spi.xfer2([1,(8+channel)&lt;&lt;4,0])
data = ((adc[1]&amp;3) &lt;&lt; 8) + adc[2]
return data

# Function to convert data to voltage level,
# rounded to specified number of decimal places.

def ConvertVolts(data,places):
volts = (data * 3.3) / 1023
volts = round(volts,places)
return volts

# Define sensor channels
light_channel = 0

# Define delay between readings
delay = 1

while True:
# Read the light sensor data
light_level = 1024 ‚Äì ReadChannel(light_channel)
light_volts = ConvertVolts(light_level,2)

# Print out results
print ‚Äú‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì‚Äù
print(‚ÄúLight: {} ({}V)‚Äù.format(light_level,light_volts))

# Wait before repeating loop
time.sleep(delay)
</code></pre>
<p>The output with normal light is:</p>
<pre><code class="language-bash">pi@pi-access-lab ~ $ ./get_light.py
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 904 (2.92V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 895 (2.89V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 903 (2.91V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 895 (2.89V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 904 (2.92V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 906 (2.92V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 896 (2.89V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 887 (2.86V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 894 (2.88V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Light: 906 (2.92V)
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
</code></pre>
<h3 id="zabbix-integration"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#zabbix-integration">ZABBIX Integration</a></h3>
<h4 id="zabbix-agent"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#zabbix-agent">Zabbix Agent</a></h4>
<p>The Zabbix Agent must be installed in the RPi in order to receive the requests from the server and send the value read. Install the agent with:</p>
<pre><code>sudo apt-get update &amp;&amp; sudo apt-get install zabbix-agent
</code></pre>
<p>The script written in Python has to be modified a bit. we want to have 100% light for the maximum light and 0% for the minimum.</p>
<blockquote>
<p>SSM Server request light to RPi ‚Üí Zabbix Agent send only the percent as a number.</p>
</blockquote>
<p>Here is the python code modified:</p>
<pre><code class="language-python">#!/usr/bin/python

import spidev
import time
import os

# Open SPI bus
spi = spidev.SpiDev()
spi.open(0,0)

# Function to read SPI data from MCP3008 chip
# Channel must be an integer 0-7
def ReadChannel(channel):
adc = spi.xfer2([1,(8+channel)&lt;&lt;4,0])
data = ((adc[1]&amp;3) &lt;&lt; 8) + adc[2]
return data

# Function to convert data to voltage level,
# rounded to specified number of decimal places.
def ConvertVolts(data,places):
volts = (data * 3.3) / 1023
volts = round(volts,places)
return volts

# Define sensor channels
light_channel = 0

# Read the light sensor data
light_level = (1024 ‚Äì ReadChannel(light_channel)) / 10.24
light_volts = ConvertVolts(light_level,2)

# Print out results
print(‚Äú{:.3}‚Äù.format(light_level))
</code></pre>
<p>The output with normal light is:</p>
<pre><code class="language-bash">[code language=‚Äùbash‚Äù]
pi@pi-access-lab ~ $ ./ssm_get.py
88.4
</code></pre>
<p>The zabbix_agent must be configured as usual with the Zabbix Server server etc, and add the command lines at the end of the configuration file. When the server request <strong>light</strong> the agent must know what to do. That is done editing the file:</p>
<pre><code>/etc/zabbix/zabbix\_agentd.conf
</code></pre>
<p>and adding:</p>
<pre><code class="language-bash">### Option: UserParameter

# User-defined parameter to monitor. There can be several user-defined parameters.
# Format: UserParameter=,
# Note that shell command must not return empty string or EOL only.
# See ‚Äòzabbix_agentd‚Äô directory for examples.
#
# Mandatory: no
# Default:

UserParameter=light,sudo /home/pi/ssm_get.py
</code></pre>
<p>Another important hack is that the user running the zabbix_agent (in my case zabbix) must have the rights to execute the command as root since we are accessing to the SPI port of the RPi. If we want to avoid writing the passwords in the scripts we can authorise the user zabbix in the sudoers file only for the command or in my case more general:</p>
<pre><code>/etc/sudoers
</code></pre>
<pre><code class="language-bash"># See sudoers(5) for more information on ‚Äú#include‚Äù directives:
#includedir /etc/sudoers.d
pi ALL=(ALL) NOPASSWD: ALL
zabbix ALL=(ALL) NOPASSWD: ALL
</code></pre>
<h3 id="zabbix-server"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#zabbix-server">Zabbix Server</a></h3>
<p>To check the installation before adding the host and checks in the server we can run in the Zabbix Server:</p>
<pre><code class="language-bash">[root@server ~]# zabbix_get -s pi-access-lab -k light
87.5
</code></pre>
<p>If that works and return the value, we can add the RPi in the Zabbix Server and create an item called light or whatever we want and associate an external check:</p>
<p><img alt="zabbix_config)" src="/images/posts/zabbix-config.png" /> </p>
<p>We can create screens for the data, graphs or whatever we need. 
Refer to the Zabbix documentation to do it. The result after 2 or 3 days getting data in my desk is: </p>
<p><img alt="zabbix_result" src="/images/posts/zabbix-result.png" /></p>
<hr />
<h2 id="11-comments"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#11-comments">11 Comments</a></h2>
<h4 id="martin-on-07052014-at-1515"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#martin-on-07052014-at-1515">Martin on 07/05/2014 at 15:15:</a></h4>
<p>Is it possible to connect more than one MCP3008 + LDR to the SPI bus with this setup? And is it possible to address this SPI via USB with standaard USB-SPI converters like ‚ÄòBus Pirate‚Äô ?</p>
<h4 id="tono-on-07052014-at-1541"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#tono-on-07052014-at-1541">Tono on 07/05/2014 at 15:41:</a></h4>
<p>Hi Martin,  </p>
<p>Well, reading http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus I would say yes, you can, but look not too simple‚Ä¶ What I would do is getting a chip with more inputs if you need more than 8 converters.
For the USB-SPI converters, honestly, I don‚Äôt know. I never used any of them.  </p>
<p>Regards.</p>
<hr />
<h4 id="andres-on-04112014-at-1455"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#andres-on-04112014-at-1455">Andres on 04/11/2014 at 14:55:</a></h4>
<p>Good information, thank‚Äôs üòâ</p>
<hr />
<h4 id="danielcamargo-on-13022015-at-0119"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#danielcamargo-on-13022015-at-0119">DanielCamargo on 13/02/2015 at 01:19:</a></h4>
<p>Hello Tono, can I receive more than one parameter using ‚ÄúUserParameter‚Äù in the agentd.conf with the same python script. I‚Äôld like to measure temperature, humidty, pressure and light. Can you help me with this? Thanks!</p>
<h4 id="tono-on-13022015-at-0959"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#tono-on-13022015-at-0959">Tono on 13/02/2015 at 09:59:</a></h4>
<p>Hi Daniel, I don‚Äôt know how is done your python script but my advice is that you do one python script for each parameter (temp, light, etc.) or a python script that take a command line argument. You have several and very good examples to do that here: http://www.tutorialspoint.com/python/python_command_line_arguments.htm.</p>
<p>Now, imagine you do a script that take the commands of: temp and light‚Ä¶ The most important is that when you run in the command line of the RPi, the script return ‚Äúsomething‚Äù exemple:</p>
<pre><code>$ script.py temp
$ 23.2

$ script.py light
$ 350
</code></pre>
<p>The script should return the temperature without anything else! Verify that doesn‚Äôt return the carrier return or other characters that could have problems with the Zabbix agent. (I had problems in the past)</p>
<p>Now, in the zabbix_agentd.conf you have to put 2 lines like this:
    UserParameter=temp,script.py temp
    UserParameter=light,script.py light</p>
<p>Later in the Zabbix interface create 2 items with the names: light and temp and is done!</p>
<p>An example from my system that is working:
In the Raspberry Pi when I run: ‚Äúcat /sys/class/thermal/thermal_zone0/temp‚Äù that returns the CPU temperature. For taking this value inside Zabbix, I write in the zabbix_agentd.conf:</p>
<pre><code>UserParameter=cpu.temp,cat /sys/class/thermal/thermal_zone0/temp
</code></pre>
<p>In Zabbix, I create a Item in the Rasperry Host like this:</p>
<pre><code>Name: CPU Temperature
Type: Zabbix agent
Key: cpu.temp
Host interface: Raspberry Host
Type of information: Numeric (float)
Units: Degrees
Use custom multiplier: 0.001
</code></pre>
<p>Hope that helps.</p>
<hr />
<h4 id="danielcamargo-on-20022015-at-2216"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#danielcamargo-on-20022015-at-2216">DanielCamargo on 20/02/2015 at 22:16</a></h4>
<p>Hello Tono,</p>
<p>This is the answer that is closer to me resolve the issue. I will test and notice here. Thank you for your help.</p>
<hr />
<h4 id="danielcamargo-on-28022015-at-1848"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#danielcamargo-on-28022015-at-1848">DanielCamargo on 28/02/2015 at 18:48</a></h4>
<p>Hi Tono,</p>
<p>I managed to send multiple data using zabbix-api for Python using JSON format. The module I used was the zbxsend (github.com/pistolero/zbxsend).
Thank you for your help! It was essential for my research project.</p>
<h4 id="tono-on-28022015-at-1850"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#tono-on-28022015-at-1850">Tono on 28/02/2015 at 18:50</a></h4>
<p>Nice to know that helped.</p>
<hr />
<h4 id="chandan-bathula-on-22112016-at-1411"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#chandan-bathula-on-22112016-at-1411">Chandan Bathula on 22/11/2016 at 14:11</a></h4>
<p>Hello Tono</p>
<p>I am a student and i am new to Python and as well as Raspberry pi 3. I have a project where i have to record the data from the temperature sensor using raspberry pi 3 and mcp3008. I have to transfer these values to another pc via wifi and generate graphs of these values. Could you give me some inputs so that i could go forward with my project. Thanking you in advance.</p>
<h4 id="daniel-dos-santos-silva-on-05052017-at-1344"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#daniel-dos-santos-silva-on-05052017-at-1344">Daniel dos Santos Silva on 05/05/2017 at 13:44</a></h4>
<p>Hi Tono‚Ä¶ Can you reupload the broken link images? Thanks.</p>
<h4 id="tono-riesco-on-05052017-at-1437"><a class="toclink" href="../../2014/01/13/analog-sensors-reading-with-raspberry-pi-and-zabbix-supervisor/#tono-riesco-on-05052017-at-1437">Tono Riesco on 05/05/2017 at 14:37</a></h4>
<p>Hi Daniel,</p>
<p>Thank you for telling me. I did it.</p>
<p>Regards.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2013-11-20 00:00:00+00:00">November 20, 2013</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="monitoring-home"><a class="toclink" href="../../2013/11/20/monitoring-home/">Monitoring Home</a></h2>
<h4 id="introduction"><a class="toclink" href="../../2013/11/20/monitoring-home/#introduction">Introduction</a></h4>
<p>The requirements for my monitoring projects are simple:</p>
<ul>
<li><strong>Want to be mostly cabling free.</strong></li>
</ul>
<p>One of the things than makes a good monitoring system at home is don't having to make new cabling all around the house each time you put a new sensor or want to check a new temperature room.</p>
<ul>
<li><strong>Want to use open-source products.</strong></li>
</ul>
<p>There are several reasons for that. Despite what most people think that we use open-source because is free (like free beer ;-)) in my case is not true. The fact of using open-source products is because the support, the driver availability, the modifications to adapt the product, etc. etc. Several times I did donations to products so at the end, has never be free as a free beer.</p>
<h4 id="requirements"><a class="toclink" href="../../2013/11/20/monitoring-home/#requirements">Requirements</a></h4>
<ul>
<li>Cheap sensors for temperature, humidity, electrical power consumption, digital status, barometric pressure,</li>
<li>Long distances &gt; 20 meters</li>
<li>Cheap controllers.</li>
<li>Easy deployment</li>
<li>Mobile, distance and independent data display</li>
<li>Database for making complex requests if needed</li>
</ul>
<h4 id="hardware"><a class="toclink" href="../../2013/11/20/monitoring-home/#hardware">Hardware</a></h4>
<ul>
<li>Sensors: DS18B20 with isolation for the heating system, normal one for standard temperatures, DHT21 for temperature and hygrometers, counters and opto-couplers¬† for electrical consumption, BMP085 Barometric Pressure,</li>
<li>Arduino Models: Uno, Mega, Mini Pro, Y√∫n</li>
<li>Raspberry Pi: Version 2, 512 Model</li>
<li>Servers: Mac mini Server, Standard Desktop PC, HP Proliant.</li>
<li>Electronics: 433 Mhz radio transmitters, relays, resistors, diodes, etc.</li>
<li>Screens and displays: TV, Standard screens, 1.8" TFT LCD Displays, Car Cameras</li>
</ul>
<h4 id="software"><a class="toclink" href="../../2013/11/20/monitoring-home/#software">Software</a></h4>
<ul>
<li>ARM Compilers for Arduino, Raspberry Pi.</li>
<li>Raspbian</li>
<li>Debian with LAMP</li>
<li>Mac OS X with LAMP</li>
<li>MySQL, SQLite, RRDtools Databases</li>
</ul>
<p>In the next posts I'll explain all the projects.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2013-11-14 00:00:00+00:00">November 14, 2013</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="raspberry-pi-and-oracle"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/">Raspberry Pi and Oracle</a></h2>
<p>Long time working with the Raspberry Pi and having a lot of interfaces I didn't find anywhere how to make requested to the Oracle DB from the OS Raspbian.</p>
<p>Here are my experiences:</p>
<p>Install Raspbian as usual. There is thousand of how to all around.</p>
<p>Install Java SDK (I'm not a fan of Java... But I didn't find another system.)¬† The OCI libraries from Oracle doesn't work on ARM architectures. Now Java SDK is in the raspbian repositories.</p>
<p>I've been using <a href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html">Instant Client</a> from Oracle on Debian host without problems but there are not drivers for Raspbian yet.</p>
<p>I'm using always root to avoid using sudo for all commands!</p>
<pre><code class="language-bash">root@host:~# apt-get install oracle-java7-jdk
</code></pre>
<p>Get the <a href="http://www.oracle.com/technetwork/database/features/jdbc/jdbc-drivers-12c-download-1958347.html">ojdbc7 driver</a> from Oracle</p>
<p>Test that java is working well with:</p>
<pre><code class="language-bash">root@host:~# java -version
java version &quot;1.7.0\_40&quot; Java(TM) SE Runtime Environment (build 1.7.0\_40-b43) Java HotSpot(TM) Client VM (build 24.0-b56, mixed mode)
</code></pre>
<p>Write a file <strong>Conn.java</strong> with the following code:</p>
<pre><code class="language-java">
import java.sql.\*; 
class Conn { public static void main (String\[\] args) throws Exception { Class.forName (&quot;oracle.jdbc.OracleDriver&quot;);

Connection conn = DriverManager.getConnection (&quot;jdbc:oracle:thin:@//ip\_or\_dns\_name\_of\_oracle\_server:port\_server/SID\_Database&quot;, &quot;login\_database&quot;, &quot;password\_database&quot;); 

// @//machineName:port/SID,¬†¬† userid,¬† password try { Statement stmt = conn.

createStatement(); 
try { ResultSet rset = stmt.executeQuery(&quot;select BANNER from SYS.V\_$VERSION&quot;);
try { while (rset.next()) System.out.println (rset.getString(1));¬†¬† } 
finally {
    try { rset.close(); } 
    catch (Exception ignore) {} 
    }
    } finally { try { stmt.close(); } catch (Exception ignore) {} } } finally { try { conn.close(); } catch (Exception ignore) {} 
    }
    }
    }
</code></pre>
<p>Now, you can compile with:</p>
<pre><code class="language-bash">javac¬† Conn.java
</code></pre>
<p>and run with:</p>
<pre><code class="language-bash">java -cp /wherever\_you\_put\_the\_file/ojdbc7.jar:. Conn\
</code></pre>
<hr />
<h2 id="comments"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/#comments">Comments</a></h2>
<h4 id="bilal-inamdar-on-02102014-at-2104"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/#bilal-inamdar-on-02102014-at-2104">Bilal Inamdar on 02/10/2014 at 21:04</a></h4>
<p>So what exactly will happen With this ?</p>
<p>See i have a similar problem just that i am using Beaglebone and it is arm debian so on there i want to
install instant client to use with PHP
target db is 11g can you help me with that ? please suggest something</p>
<h4 id="tono-on-03102014-at-1402"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/#tono-on-03102014-at-1402">Tono on 03/10/2014 at 14:02</a></h4>
<p>Well‚Ä¶ suggest something‚Ä¶ Probably, if you change to RPi instead of using the Beaglebone? üòâ
Honestly, I cannot help you because I don‚Äôt know anything about this card, or the operating system.
If as you said, is a arm debian, I don‚Äôt understand why will not work my solution in your hardware if is just software!!
Regards.</p>
<hr />
<h4 id="will-on-09032015-at-1647"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/#will-on-09032015-at-1647">Will on 09/03/2015 at 16:47</a></h4>
<p>I keep getting an error when I run
javac /home/pi/Desktop/Conn.java
The error message I get is:
javac: invalid flag: /home/pi/Desktop/Conn.Java
Usage: javac
use -help for a list of possible options</p>
<h4 id="tono-on-09032015-at-1656"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/#tono-on-09032015-at-1656">Tono on 09/03/2015 at 16:56</a></h4>
<p>Well‚Ä¶ is strange‚Ä¶ For me works‚Ä¶.
Did you install the instant client? Java? Did you test with:</p>
<pre><code>java -version ?
</code></pre>
<p>I‚Äôm not an expert in java, honestly, but this error can came for thousand of things. Starting with a mistake in a word written on the code till some missing libraries‚Ä¶</p>
<p>Sorry but I cannot help you with java, the only thing that I can assure you is that the code works (right now is working) and connecting.</p>
<p>Regards.</p>
<hr />
<h4 id="belganon-on-20072017-at-1139"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/#belganon-on-20072017-at-1139">Belganon on 20/07/2017 at 11:39</a></h4>
<p>Old post but It‚Äôs still working ‚ô•</p>
<hr />
<h4 id="pawel-on-28112017-at-2310"><a class="toclink" href="../../2013/11/14/raspberry-pi-and-oracle/#pawel-on-28112017-at-2310">Pawel on 28/11/2017 at 23:10</a></h4>
<p>Hi,
The above procedure works as expected. However, any idea how to add mqtt client into You code? I have installed Mosquitto MQTT on Pi and I can publish it using mosquitto_pub but I have no idea how to put that into the above java code? Alternativelly, is there any way to use node.js with above code? Meaning use jdbc connection from jode.js? Normally I‚Äôd use oracledb but no such thing available for arm üôÅ</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2013-01-21 00:00:00+00:00">January 21, 2013</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="espana-no-paga-las-facturas"><a class="toclink" href="../../2013/01/21/espa%C3%B1a-no-paga-las-facturas/">Espa√±a no paga las facturas</a></h2>
<p>Posiblemente el <a href="http://cern.ch">CERN , el laboratorio de investigaci√≥n de part√≠culas f√≠sicas,</a> es la joya de la corona de la ciencia en Europa, en el que colaboran m√°s de 20 pa√≠ses.¬† Mientras los cient√≠ficos del CERN se dedican a sus tareas de investigaci√≥n todos los d√≠as por nuestras latitudes nos dedicamos a recortar la inversi√≥n en ciencia y tecnolog√≠a, B√°rcenas se dedica a mover por todo el mundo decenas de millones de euros y Espa√±a logra hacer mayor de los rid√≠culos al convertirse en el¬† √∫nico pa√≠s de los 20 participantes que ha convertido en¬† moroso del CERN con una deuda superior a los 50 millones de euros.</p>
<p>La cifra no es elevada y el retraso en el pago no es nada del otro mundo para la Administraci√≥n P√∫blica espa√±ola, pero no deja de chocar algo con las pr√°cticas habituales de pago en el resto del mundo. Es m√°s los responsables del CERN andan algo alborotados y preocupados y est√°n empezando a plantearse revocarle a Espa√±a sus derechos de voto por moroso.</p>
<p>As√≠ lo ha explicado Rolf-Dieter Heuer, director del CERN al Financial Times:</p>
<blockquote>
<p>‚Äù Esto no es normal, porque lo normal es que los pa√≠ses paguen puntualmente su cuota cada a√±o. Ahora debemos intentar trabajar de forma constructiva para intentar que la deuda no se vaya acumulando‚Äù</p>
</blockquote>
<p>Parece que Rolf-Dieter Heuer debe haber hecho sus deberes y se debe haber enterado que la administraci√≥n espa√±ola no s√≥lo tiene costumbre de retrasar el pago de sus facturas sino que tiene una cierta tendencia a ir acumulando deuda. Bueno de hecho el bueno de Rolf-Dieter Heuer debe andar algo desesperado porque una delegaci√≥n del CERN ya lleva varios viajes a Madrid en los √∫ltimos 6 meses para intentar cobrar la deuda y establecer un plan de pagos.</p>
<p>La √∫ltima vez que Espa√±a pag√≥ su contribuci√≥n al CERN fue en Diciembre de 2011 (pago con un a√±o de retraso) y en 2012 s√≥lo pag√≥ el 25% de la cuota que le tocaba, dejando una deuda de 50 millones de euros. Para 2013 le toca pagar 75 millones de euros, aunque los presupuestos espa√±oles contemplan s√≥lo pagar 50 millones de euros (peque√±o recorte de la cuota por la cara sin consenso con el resto de pa√≠ses) y en teor√≠a si en 2013 no paga la cuota que le corresponde y la deuda acumulada ver√° como se le revocan sus derechos de voto en el CERN.</p>
<p>Pero no es preocup√©is, la prima de riesgo baja, todo el mundo parece feliz y que Espa√±a no pague sus facturas no es un s√≠ntoma de insolvencia, nosotros somos los m√°s solventes del mundo, estamos en la Chanmpions de la econom√≠a mundial y nuestro sistema financiero es de lo m√°s s√≥lido que te puedes encontrar sobre la faz del planeta tierra.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2012-08-24 00:00:00+00:00">August 24, 2012</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="cumpleanos-de-helena"><a class="toclink" href="../../2012/08/24/cumplea%C3%B1os-de-helena/">Cumplea√±os de Helena</a></h2>
<p>Feliz Cumplea√±os!</p>
<p>Otro a√±o sin tener noticias de ti pero no voy a ponerme melodram√°tico. A√∫n me acuerdo cuando naciste, tan peque√±a e indefensa... Me puedo imaginar que has cambiado mucho. M√°s tarde pondr√© algunas fotos que tengo tuyas de peque√±a.</p>
<p>Yo sigo anclado en los recuerdos que tengo de cuando eras peque√±a porque no tengo otros. Tanto intercambio entre abogados, jueces, psic√≥logos, fiscales.... Pero sigo sin verte, ni tocarte, ni sentirte, nada.</p>
<p>Yo no voy a abandonar. Quiero que lo tengas claro. No es justo que no pueda ni hablar contigo, ni tan siquiera ver una foto tuya.
Este a√±o cumple su primer a√±o Tim, tu hermano, que cada d√≠a est√° m√°s grande y pronto empezar√° a andar!</p>
<p>A√∫n sin tener noticias, no tengo rencor. No tengo rencor porque Tim necesita a su padre feliz y sin rencores ni odios para crecer feliz. Tu tambi√©n lo necesitas a tu padre, aunque no lo creas. Probablemente te dar√°s cuenta m√°s tarde pero bueno, eso es otra historia.</p>
<p>Te dejo algunas fotos de Tim.
Un beso. Tu padre te sigue queriendo mucho aunque no te vea.</p>
<p>PD: En los comentarios hay m√°s felicitaciones de las t√≠as. Si no fuera por ellas, no se como hubiera aguantado todo esto!</p>
<p><img alt="Tim en el Caballo de Helena&quot;" src="/images/posts/tim-caballo.jpg" /></p>
<p><img alt="Tim 2" src="/images/posts/tim-pequeno-2.jpg" /></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2012-05-10 00:00:00+00:00">May 10, 2012</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="piratas-de-domingo"><a class="toclink" href="../../2012/05/10/piratas-de-domingo/">Piratas de Domingo</a></h2>
<p>Hay una nueva generaci√≥n de piratas que he decidido llamarles "Piratas de Domingo", tambi√©n podr√≠amos llamarles "toca-pelotas", "aficionados al mamoneo inform√°tico" o "yo si que s√© de pirateo y t√∫ no".</p>
<p>En fin, todo esto para contaros lo mal que est√° Internet. Est√° mal y se pondr√° peor porque aunque todo el mundo se queja de lo lento de su conexi√≥n, se pregunta porque solo tenemos XX Megas de banda pasante, etc,etc, nadie hace nada para evitar el consumismo excesivo de Internet</p>
<p>Cuando veo lo que veo en los informes de seguridad de los sitios web, me dan ganas de llorar. Llorar, pero de risa, porque no os equivoqu√©is, los piratas domingueros no consiguen nada! Pero eso si, me los imagino tom√°ndose unas cervezas en el bar con sus amigos. La conversaci√≥n podr√≠a desarrollarse as√≠ entre 2 seudo-piratas:</p>
<p>‚Äì‚ÄìYo, el otro d√≠a me baj√©: Adobe X, Photoshop 34, Autocad 16 y la √∫ltima versi√≥n de SAP, las pirate√© y las tengo instaladas...</p>
<p>‚Äì‚Äì&gt; Conclusi√≥n 1: Tienes 4 programas que valen 20000 Euros, que no sabes utilizarlos, que no sabes para que sirven, que nunca vas a pasar de la primera p√°gina y que en el pr√≥ximo borrado de disco van a desaparecer, si borrego-pirata si, porque te van a poner 45 espiones y 23 virus y al final tu ordenador va a ser "de los otros", no tuyo. Los pirataste siguiendo las instrucciones de 56 foros, a cual m√°s rocambolesco, con 60 links de publicidad que dieron 2 euros a los que publican el foro... claro, eso, el pirata aficionado no lo sabe!)</p>
<p>El otro pseudo-piratilla, con una sonrisa en la boca, y mir√°ndole, le dice:</p>
<p>‚Äì‚ÄìPuaj... Yo ya paso de piratear programas, yo hago "jaquing" de sitios web....(silencio)...el otro le mira y le pregunta:</p>
<p>‚Äì‚ÄìYa, y que has "jaqueado" ?</p>
<p>‚Äì‚ÄìMira...he entrado en el sitio de horoscopo-cochino.com, cagoento.net y cocaparatodos.org JA.... eso si que es duro!</p>
<p>‚Äì‚Äì&gt; Explicaci√≥n 2: El Piratilla2 buscando, buscando, ha encontrado un programa que "piratea" sitios web...ya... Esto lo hace "barriendo" literalmente Internet, buscando IPs que respondan al puerto 80 y en cada direcci√≥n buscando: /var/www/phpmyadmin, /var/www/manager, /www/var/judge.php, etc.etc. Resultado, cuando lo encuentran, buscan vulnerabilidades, √©sto lo hace el software, no el payaso-pirata que no sabe hacer la "O" con un canuto! Si encuentran vulnerabilidades, las env√≠an al fichero central de los <strong>verdaderos piratas</strong> para ser analizado y ver si pueden encontrar informaci√≥n interesante: datos, bancos, tarjetas de cr√©dito, etc.</p>
<p>La conclusi√≥n de todo esto es que tenemos los logs llenniiittoos de los petardos-piratas con b√∫squedas incesantes de todo tipo de cosas (hay algunos que he contado m√°s de 1000 b√∫squedas), que los bloqueamos con potentes firewalls y que lo √∫nico que hacen es perder el tiempo y lo peor, llenar la red de millones de bytes que no sirven para nada y hacen que cada vez consumamos m√°s energ√≠a.</p>
<p>Otro dato importante es que los gili-piratas no tienen ni idea de como funciona Internet! Si, si, como os lo cuento! Para la mayor√≠a de ellos, un router es un aparato que le has dado Telef√≥nica y que est√° debajo de la mesa del ordenador! Un puerto es algo que hay que abrir para poder utilizar Emule y Cisco es el presente del verbo Ciscar, "yo cisco" o "me cisco" sin√≥nimo de "yo ji√±o" o "me ji√±o".</p>
<p>Como dato final os dir√© que en un sitio web, lo normal es encontrar un 20 o 30 % de esos bellotos-piratas intentando entrar y en general os dir√© que el 89% del tr√°fico total de correos son spam... Para llorar.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2012-04-23 00:00:00+00:00">April 23, 2012</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="2500-francos-para-todos"><a class="toclink" href="../../2012/04/23/2500-francos-para-todos/">2500 Francos para todos</a></h2>
<p>Suiza no deja de sorprenderme... Se ha lanzado una <a href="http://eginebra.org/2500-francos-para-todos/">Iniciativa popular para pagar 2500 CHF</a> (~2000 Euros) a todas las personas que vivan legalmente en Suiza.</p>
<p>Al principio me hizo re√≠r, os imagin√°is que os dieran un dinero sin hacer nada! Solo por el simple hecho de tener una nacionalidad? Nadie trabajar√≠a, no? Despu√©s he mirado con detenimiento el texto y el razonamiento es mucho m√°s inteligente de lo que parece... De hecho, es posible que se ahorrara dinero.</p>
<p>Para hacerlo sencillo, imaginad que un pa√≠s tiene como presupuesto un mill√≥n de euros para ayudas sociales... Parados de larga duraci√≥n, gente sin recursos, ayuda al alquiler y todos los cientos de ayudas y modalidades que existen para ayudar a las personas que tienen problemas. Imaginemos que hay 1000 personas que se benefician de ese mill√≥n. Bien, pues la iniciativa dice: Porque no repartir 1 mill√≥n entre las 1000 personas directamente sin tener que hacer nada? Con esto, les damos 1000 Euros a cada uno, y asunto arreglado.</p>
<p>Lo que no se ve, es que para asignar 1 mill√≥n entre 1000 personas, con los sistemas actuales en los pa√≠ses modernos, esto cuesta <strong>otro mill√≥n</strong> para pagar a 100 personas que se ocupan de recibir las demandas de ayuda, tramitarlas, rechazarlas, facturarlas, etc, etc. Con lo cual, con este procedimiento <strong>nos ahorramos los 100 funcionarios</strong> que est√°n tramitando todo.</p>
<p>Este es uno de los puntos evocados en la iniciativa, hay alguno m√°s muy bien pensado. Por ejemplo, la persona que gane, digamos, 4000 CHF, no pasar√° a cobrar 6500! Su sueldo ser√°: 2500 fijos + 1500 sueldo por su trabajo. Al final se quedar√≠a igual.</p>
<p>No creo que la iniciativa sea finalmente aceptada pero es una idea muy buena para acabar con la burocracia, con los abusos y sobre todo con el estr√©s que provoca en la gente sin recursos tener que justificar decenas de veces su situaci√≥n.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2011-11-18 00:00:00+00:00">November 18, 2011</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="medida-de-los-neutrinos"><a class="toclink" href="../../2011/11/18/medida-de-los-neutrinos/">Medida de los neutrinos.</a></h2>
<p>Tras la presentaci√≥n de la colaboraci√≥n OPERA en el CERN el 23 de septiembre, no se ha parado de buscar la velocidad del neutrino, la part√≠cula m√°s estudiada por la comunidad de la f√≠sica.</p>
<p>Una prueba clave fue la repetici√≥n de la medici√≥n con pulsos de muy corta frecuencia. Esto permiti√≥ que el tiempo de extracci√≥n de los protones que finalmente conducen al haz de neutrinos se pueda¬† medir con m√°s precisi√≥n.</p>
<p>El haz enviado por el CERN consisti√≥ en pulsos de tres nanosegundos de largo separados por hasta 524 nanosegundos. Unos 20 eventos de neutrinos se midieron en el Laboratorio Nacional Gran Sasso. Esta prueba confirma la exactitud de la medici√≥n de tiempo de OPERA, descartando una posible fuente de error sistem√°tico. Las nuevas medidas no cambian la conclusi√≥n inicial. Sin embargo, la anomal√≠a observada en el tiempo de viaje de los neutrinos desde el CERN hasta el Gran Sasso todav√≠a necesita m√°s controles y mediciones independientes antes de que pueda ser refutada o confirmada. El 17 de noviembre, la colaboraci√≥n present√≥ un documento sobre esta medida para la revista revisada por JHEP. Este documento est√° disponible en el servidor http://arxiv.org/abs/1109.4897</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2011-11-11 00:00:00+00:00">November 11, 2011</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="cosas-que-hacen-que-te-sientas-feliz"><a class="toclink" href="../../2011/11/11/cosas-que-hacen-que-te-sientas-feliz/">Cosas que hacen que te sientas feliz</a></h2>
<p>Si fuera f√°cil ser feliz....</p>
<p>Hay veces que una canci√≥n, unas palabras, un desliz, hacen que te sientas feliz. En este mundo raro en que no sabemos donde vamos, quien queremos ser, donde queremos estar, nos perdemos en peque√±eces y no miramos lo fundamental.</p>
<p>Hoy me he sentido mal viendo un reportaje sobre la comida que tiramos, que las grandes superficies tiran porque caducan o simplemente porque est√°n a punto de caducar y me he sentido peque√±o y muy est√∫pido viviendo en esta sociedad que hace del negocio un todo, sin buscar lo fundamental, intentar ser feliz sin que otros sufran.</p>
<p>Con reflexiones nocturnas sobre la realidad me he encontrado llorando entre caminos torcidos sobre los pedazos de mi propio ser. No tengo donde ir, donde caerme dormido, como un ni√±o. Huir del dolor es algo dif√≠cil, es como escribir en p√°ginas en blanco, como estar de paso, sin ning√∫n sitio donde ir.</p>
<p>Estamos de paso, sin un sitio claro donde ir, que prisa por vivir!!! Me gustar√≠a aprender a dormir, a despertar so√±ando en otra realidad, otra verdad. Hay heridas que no ayudan a vivir y que no se curan con el tiempo.</p>
<p>Con todas estas reflexiones pienso en las cosas que son importantes, las que de verdad me importan, las que no importan a los dem√°s, en las que me matan o me salvan pero que al final me hacen mejor, mas libre.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2011-09-23 00:00:00+00:00">September 23, 2011</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="tim-ha-llegado"><a class="toclink" href="../../2011/09/23/tim-ha-llegado/">Tim ha llegado.</a></h2>
<p>Hace tiempo que no escribo por falta de tiempo, de ganas o posiblemente un poco de las dos cosas. Hoy es un d√≠a importante, si, y no porque en el CERN, la experiencia OPERA ha medido el tiempo de vuelo de los neutrinos que se envian a Gran Sasso, poniendo en duda uno de los dogmas que mas han excitado a profanos y eruditos, el l√≠mite absoluto de la velocidad de la luz y con ella, la famosa f√≥rmula de Einstein E=mc2. Estas medidas parecen demostrar que los neutrinos viajan m√°s r√°pido que la luz.</p>
<p>Esto es muy importante porque puede hacer temblar algunos fundamentos de la f√≠sica cu√°ntica y...humm...y yo, para que estaba aqu√≠ hoy? Ah, si... para hablaros de Tim.</p>
<p>Y qui√©n es Tim, os preguntareis? Pues Tim es mi hijo que acaba de nacer en Ginebra y es grande, guapo, fuerte y... en fin, ya sabeis como va esto, no? No os voy a dar los datos t√©cnicos porque no cuento con su autorizaci√≥n, pero os aseguro que son impresionantes :-)</p>
<p><img alt="tim" src="/images/posts/tim-pequeno-2.jpg" /></p>
<p>Estoy contento porque est√° aqu√≠ y porque todo ha salido bien, muy bien. La madre es una mujer que hoy me ha impresionado por su entereza, su fuerza y su "saber estar" incluso cuando las cosas no van al 100% bien. Tiene madera de ganadora y hoy me lo ha demostrado con creces.</p>
<p>Solo quer√≠a compartir con vosotros este momento de alegr√≠a y muy pronto os dar√© mas datos y alguna foto.</p>
<p>Tono.</p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../3/">3</a> <a class="md-pagination__link" href="../4/">4</a> <span class="md-pagination__current">5</span> <a class="md-pagination__link" href="../6/">6</a> <a class="md-pagination__link" href="../7/">7</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../9/">9</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>